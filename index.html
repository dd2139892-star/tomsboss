<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>éº¥ç•¶å‹å–®é»å°ˆç”¨v1ï¼ˆWebï¼‰</title>
<style>
  :root {
    --bg:#0b0f14; --card:#111827; --muted:#6b7280; --text:#e5e7eb; --accent:#60a5fa; --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; --border:#1f2937;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans","Helvetica Neue",Arial}
  .container{max-width:1100px;margin:32px auto;padding:0 16px}
  h1{font-size:22px;margin:0 0 16px}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
  .toolbar .btn{background:#1f2937;border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
  .toolbar .btn:hover{border-color:#334155}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  .sound{display:flex;align-items:center;gap:8px;color:var(--muted)}
  select,input[type="text"],input[type="number"]{background:#0b1220;border:1px solid #22324a;color:var(--text);padding:8px;border-radius:10px}
  input[type="number"]{width:80px;text-align:center}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:10px;border-bottom:1px solid var(--border);text-align:center}
  th{color:#cbd5e1;font-weight:600}
  .timeSoon{color:var(--warn)}
  .timeDue{color:var(--bad);font-weight:700}
  .pill{display:inline-block;padding:4px 8px;border:1px solid #2a3a56;border-radius:999px;color:#93c5fd;background:#0b1220}
  .muted{color:var(--muted)}
  .footer{margin-top:8px;font-size:12px;color:#94a3b8}
  .hidden{display:none!important}
  /* å¯†ç¢¼é®ç½© */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:50}
  .modal{width:320px;background:#121826;border:1px solid #1f2a44;border-radius:14px;padding:18px}
  .modal h3{margin:0 0 10px;font-size:18px}
  .modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
  .modal button{background:#1f2937;border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
  .modal button.primary{background:#2563eb;border-color:#2563eb}
  .grid{display:grid;grid-template-columns:repeat(5, minmax(0,1fr));gap:10px}
  @media (max-width:900px){.grid{grid-template-columns:1fr 1fr}}
  .copy-toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#111827;border:1px solid #334155;padding:8px 12px;border-radius:10px;color:#cbd5e1;opacity:0;transition:opacity .25s}
  .copy-toast.show{opacity:1}
</style>
</head>
<body>
<div id="pwOverlay" class="overlay">
  <div class="modal">
    <h3>å¯†ç¢¼é©—è­‰</h3>
    <p class="muted" style="margin:6px 0 10px">è«‹è¼¸å…¥æœ¬é€±å¯†ç¢¼æ‰èƒ½é€²å…¥ã€‚</p>
    <input id="pwInput" type="password" placeholder="æœ¬é€±å¯†ç¢¼" style="width:100%">
    <div class="actions">
      <button id="pwCancel">é›¢é–‹</button>
      <button id="pwOk" class="primary">ç¢ºå®š</button>
    </div>
    <div id="pwMsg" class="muted" style="margin-top:8px;font-size:12px"></div>
  </div>
</div>

<div class="container">
  <h1>éº¥ç•¶å‹å–®é»å°ˆç”¨v1ï¼ˆWebï¼‰</h1>

  <!-- æ–°å¢å€ -->
  <div class="card">
    <div class="grid">
      <div>
        <div class="muted" style="margin-bottom:6px">ç« ç¯€ (EP)</div>
        <select id="ep"></select>
      </div>
      <div>
        <div class="muted" style="margin-bottom:6px">åœ°åœ–åç¨±</div>
        <select id="map"></select>
      </div>
      <div>
        <div class="muted" style="margin-bottom:6px">ç­‰ç´š</div>
        <input id="level" type="text" readonly>
      </div>
      <div>
        <div class="muted" style="margin-bottom:6px">åˆ†æµ</div>
        <select id="channel"></select>
      </div>
      <div>
        <div class="muted" style="margin-bottom:6px">å€’æ•¸æ™‚é–“</div>
        <div class="row" style="align-items:center">
          <input id="hh" type="number" value="1" min="0" max="99" />
          <span class="muted">æ™‚</span>
          <input id="mm" type="number" value="0" min="0" max="59" />
          <span class="muted">åˆ†</span>
          <input id="ss" type="number" value="0" min="0" max="59" />
          <span class="muted">ç§’</span>
        </div>
      </div>
    </div>
    <div class="row" style="margin-top:12px;justify-content:space-between">
      <div class="toolbar">
        <button class="btn" id="addBtn">æ–°å¢ BOSS</button>
        <button class="btn" id="copyCheckedBtn">è¤‡è£½å‹¾é¸</button>
        <button class="btn" id="copyAllBtn">è¤‡è£½å…¨éƒ¨</button>
        <button class="btn" id="delCheckedBtn">æ¸…é™¤å‹¾é¸</button>
        <button class="btn" id="delAllBtn">æ¸…é™¤å…¨éƒ¨</button>
      </div>
      <div class="sound">
        <label><input type="checkbox" id="soundToggle" checked> å•Ÿç”¨æç¤ºéˆ´è²</label>
        <span>æå‰æç¤º</span>
        <select id="alertBefore">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="3">3</option>
          <option value="5">5</option>
          <option value="10">10</option>
        </select>
        <span>åˆ†é˜</span>
      </div>
    </div>
  </div>

  <!-- æ¸…å–® -->
  <div class="card" style="margin-top:12px">
    <table id="list">
      <thead>
        <tr>
          <th>âœ”</th>
          <th>ç« ç¯€</th>
          <th>åœ°åœ–åç¨±</th>
          <th>ç­‰ç´š</th>
          <th>åˆ†æµ</th>
          <th>æ™‚é–“</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
    <div class="footer">ä¾æ™‚é–“ï¼ˆå¯¦éš›åˆ°é»ï¼‰æ’åºï¼›ç›¸åŒã€Œç« ç¯€+åœ°åœ–+åˆ†æµã€æ–°å¢ç¬¬äºŒæ¬¡æœƒè¦†è“‹ç¬¬ä¸€æ¬¡ï¼›è³‡æ–™å„²å­˜åœ¨ç€è¦½å™¨çš„ localStorageã€‚</div>
  </div>
</div>

<div id="toast" class="copy-toast">å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼</div>

<script>
/** ===== å¸¸æ•¸ & è³‡æ–™ ===== */
const PASSWORD_URL = "https://script.google.com/macros/s/AKfycbyQB0VxmIukBcZRzFmRm4_xirXZIfMxNkY_h4LwAO4iiaUx3yw1JGjBZx0BO9mRvVb5/exec";

const EP_MAP_LEVEL = {
  "EP1": {"å¤å¥§é›·ä¼Šè¥¿é‚Šæ£®æ—":"Lv.1","å¤å¥§é›·ä¼Šæ±é‚Šæ£®æ—":"Lv.3","è“®å¸•æ‹‰æ²™æ± å¡˜":"Lv.5","å¤å¥§é›·ä¼Šç¤¦å±±æ‘èŠ":"Lv.7","æ°´æ™¶ç¤¦å±±":"Lv.9"},
  "EP2": {"æ–¯æ‹‰å±‹å¡”æ–¯å³½è°·":"Lv.10","å‡±åˆ©é«˜åŸ":"Lv.11","å¥ˆæ™®é‡Œå¡”æ–¯æ‡¸å´–":"Lv.12","æ³°å…§èŠ±åœ’":"Lv.13","æ³°å…§è–å ‚åœ°ä¸‹1å±¤":"Lv.15","æ³°å…§è–å ‚ä¸Š1å±¤":"Lv.17","æ³°å…§è–å ‚ä¸Š2å±¤":"Lv.19"},
  "EP3": {"åº«é­¯æ£®æ—":"Lv.20","å…‹å°¼å¤šæ–¯æ£®æ—":"Lv.21","é”æ—¦æ£®æ—":"Lv.22","è«¾å·´å“ˆå…¬æœƒæ‰€":"Lv.24","è«¾å·´å“ˆåˆ¥é¤¨":"Lv.26","è«¾å·´å“ˆæœ¬é™¢":"Lv.28"},
  "EP4": {"è²é›…å±±è°·":"Lv.30","æ¯”çˆ¾å¡”æºªè°·":"Lv.31","ç§‘åšçˆ¾ç‰¹æ£®æ—":"Lv.32","è³½æå°¼å±±æº":"Lv.34","åŸ¹çˆ¾å…‹ç¥æ®¿":"Lv.36","å®‰æ£®å¡”æ°´æºåœ°":"Lv.38"},
  "EP5": {"å¡ç¾…åˆ©æ–¯æ³‰æ°´":"Lv.40","èŠå¡”æ–¯å°æºª":"Lv.42","å¾·æ…•è˜­ä½ƒè¾²æ‘":"Lv.44","å¾·æ…•è˜­èŠåœ’":"Lv.46","å¾·æ…•è˜­å¤–åŸ":"Lv.48"},
  "EP6": {"é”ä¼Šç´é¤Šèœ‚åœ°":"Lv.50","æ¯”çˆ¾é‚£æ£®æ—":"Lv.51","çƒå¥‡æ–¯è€•ä½œåœ°":"Lv.52","æ˜¥å…‰æ¨¹æ—":"Lv.53","é—œå£è·¯":"Lv.55","å²çˆ¾ç‰¹å‡±æ‹‰ç‰¹æ—":"Lv.57","å…‹å·´ä¼Šæ‹‰æ–¯æ£®æ—":"Lv.59"},
  "EP7": {"é­¯å¡æ–¯é«˜åŸ":"Lv.60","ç‹ä¹‹é«˜åŸ":"Lv.61","æœ­å¡é‡Œè€¶çˆ¾äº¤å‰è·¯":"Lv.62","ç‹é™µ1å±¤":"Lv.64","ç‹é™µ2å±¤":"Lv.66","ç‹é™µ3å±¤":"Lv.68"},
  "EP8": {"æ°´è·¯æ©‹åœ°å€":"Lv.70","é­”æ—æ”¶ç›£æ‰€ç¬¬1å€":"Lv.71","é­”æ—æ”¶ç›£æ‰€ç¬¬3å€":"Lv.72","é­”æ—æ”¶ç›£æ‰€ç¬¬4å€":"Lv.73","é­”æ—æ”¶ç›£æ‰€ç¬¬5å€":"Lv.74"},
  "EP9": {"å¥³ç¥çš„å¤é™¢":"Lv.75","ä½©è¿ªç±³å®‰å¤–åŸ":"Lv.76","é­”æ³•å¸«ä¹‹å¡”1å±¤":"Lv.77","é­”æ³•å¸«ä¹‹å¡”2å±¤":"Lv.78","é­”æ³•å¸«ä¹‹å¡”3å±¤":"Lv.79"},
  "EP10":{"å¤§æ•™å ‚æ‡ºæ‚”è·¯":"Lv.80","å¤§æ•™å ‚æ­£æ®¿":"Lv.81","å¤§æ•™å ‚å¤§è¿´å»Š":"Lv.82","å¤§æ•™å ‚è‡³è–æ‰€":"Lv.83"},
};
const CHANNELS = Array.from({length:10},(_,i)=>String(i+1));

/** ===== ç‹€æ…‹ ===== */
const state = {
  entries: {}, // key = `${ep}||${map}||${channel}` â†’ {ep,map,level,channel,targetISO,checked,alertedBefore,alertedFinal}
  soundEnabled: true,
  alertBeforeMin: 0,
};

/** ===== å·¥å…· ===== */
const pad2 = n => String(n).padStart(2,"0");
const fmtTime = d => `${pad2(d.getHours())}:${pad2(d.getMinutes())}:${pad2(d.getSeconds())}`;
function fmtDisplayTime(target){
  const now = new Date();
  const base = fmtTime(target);
  const startA = new Date(now); startA.setHours(0,0,0,0);
  const startB = new Date(target); startB.setHours(0,0,0,0);
  const dayDiff = Math.floor((startB - startA) / 86400000);
  return dayDiff===0 ? base : `${base} (+${dayDiff}d)`;
}
function keyOf(ep,map,channel){ return `${ep}||${map}||${channel}`; }
function beep(){
  if(!state.soundEnabled) return;
  try{
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const g = ctx.createGain();
    osc.type='sine'; osc.frequency.value=880;
    osc.connect(g); g.connect(ctx.destination);
    g.gain.setValueAtTime(0.0001, ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.2, ctx.currentTime+0.01);
    osc.start();
    setTimeout(()=>{osc.stop(); ctx.close();}, 200);
  }catch(e){ /* ignore */ }
}
function toast(msg="å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼"){
  const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),1000);
}

/** ===== æœ¬åœ°å­˜å– ===== */
const LS_KEY = "tomsboss_web_entries";
const LS_PREF = "tomsboss_web_pref";
function save(){
  localStorage.setItem(LS_KEY, JSON.stringify(state.entries));
  localStorage.setItem(LS_PREF, JSON.stringify({soundEnabled:state.soundEnabled, alertBeforeMin:state.alertBeforeMin}));
}
function load(){
  try{
    const data = JSON.parse(localStorage.getItem(LS_KEY) || "{}");
    if (data && typeof data === "object") state.entries = data;
  }catch{}
  try{
    const pref = JSON.parse(localStorage.getItem(LS_PREF) || "{}");
    if (typeof pref?.soundEnabled === "boolean") state.soundEnabled = pref.soundEnabled;
    if (typeof pref?.alertBeforeMin === "number") state.alertBeforeMin = pref.alertBeforeMin;
  }catch{}
}

/** ===== UI ç¶å®š ===== */
const epSel = document.getElementById('ep');
const mapSel = document.getElementById('map');
const levelInp = document.getElementById('level');
const chSel = document.getElementById('channel');
const hhInp = document.getElementById('hh');
const mmInp = document.getElementById('mm');
const ssInp = document.getElementById('ss');
const tbody = document.getElementById('tbody');

const soundToggle = document.getElementById('soundToggle');
const alertBefore = document.getElementById('alertBefore');

function initSelectors(){
  // EP
  epSel.innerHTML = Object.keys(EP_MAP_LEVEL).map(ep=>`<option value="${ep}">${ep}</option>`).join("");
  // Channels
  chSel.innerHTML = CHANNELS.map(c=>`<option value="${c}">${c}</option>`).join("");
  // Alert before
  alertBefore.value = String(state.alertBeforeMin||0);
  soundToggle.checked = !!state.soundEnabled;

  refreshMaps();
}
function refreshMaps(){
  const ep = epSel.value;
  const maps = Object.keys(EP_MAP_LEVEL[ep]||{});
  mapSel.innerHTML = maps.map(m=>`<option value="${m}">${m}</option>`).join("");
  refreshLevel();
}
function refreshLevel(){
  const ep=epSel.value, map=mapSel.value;
  levelInp.value = (EP_MAP_LEVEL[ep]||{})[map] || "";
}

/** ===== æ¸²æŸ“è¡¨æ ¼ ===== */
function render(){
  // æ’åºï¼ˆtarget æ™‚é–“æ—©åˆ°æ™šï¼‰
  const rows = Object.values(state.entries).sort((a,b)=>new Date(a.targetISO)-new Date(b.targetISO));
  tbody.innerHTML = rows.map(row=>{
    const target = new Date(row.targetISO);
    const now = new Date();
    let cls = "";
    if (now >= target) cls = "timeDue";
    else if ((target - now) <= 10*60*1000) cls = "timeSoon"; // 10 åˆ†é˜å…§å³å°‡åˆ°
    return `<tr data-key="${keyOf(row.ep,row.map,row.channel)}">
      <td><input type="checkbox" class="chk" ${row.checked?'checked':''}></td>
      <td>${row.ep}</td>
      <td>${row.map}</td>
      <td><span class="pill">${row.level}</span></td>
      <td>${row.channel}</td>
      <td class="${cls}">${fmtDisplayTime(new Date(row.targetISO))}</td>
    </tr>`;
  }).join("");
}

/** ===== è¡Œç‚ºï¼šæ–°å¢ã€è¤‡è£½ã€åˆªé™¤ ===== */
function clamp(v, lo, hi){ v = parseInt(v,10); if(isNaN(v)) v=0; return Math.max(lo, Math.min(hi, v)); }

document.getElementById('addBtn').addEventListener('click', ()=>{
  const ep = epSel.value;
  const map = mapSel.value;
  const level = levelInp.value || "";
  const ch = chSel.value;
  const h = clamp(hhInp.value, 0, 99);
  const m = clamp(mmInp.value, 0, 59);
  const s = clamp(ssInp.value, 0, 59);
  if (!ep || !map || !ch){ alert('è«‹å®Œæ•´é¸æ“‡ EP / åœ°åœ– / åˆ†æµ'); return; }
  if (h===0 && m===0 && s===0){ alert('å€’æ•¸æ™‚é–“ä¸å¯ç‚º 0'); return; }

  const target = new Date(Date.now() + (h*3600 + m*60 + s)*1000);
  const key = keyOf(ep,map,ch);
  const prev = state.entries[key] || {};
  state.entries[key] = {
    ep, map, level, channel: ch,
    targetISO: target.toISOString(),
    checked: !!prev.checked,
    alertedBefore: false,
    alertedFinal: false,
  };
  save(); render();
});

/** å–å¾—å‹¾é¸/å…¨éƒ¨ rowsï¼ˆå·²æŒ‰æ™‚é–“æ’åºï¼‰ */
function getSelectedRows(){
  return Object.values(state.entries)
    .filter(r=>r.checked)
    .sort((a,b)=>new Date(a.targetISO)-new Date(b.targetISO));
}
function getAllRows(){
  return Object.values(state.entries)
    .sort((a,b)=>new Date(a.targetISO)-new Date(b.targetISO));
}

/** ğŸ”¶ ä½ è¦çš„è¤‡è£½æ ¼å¼ï¼šEP-ç­‰ç´šæ•¸å­—-åˆ†æµ-æ™‚é–“ï¼ˆæ¯ç­†ä¸€è¡Œï¼‰ */
document.getElementById('copyCheckedBtn').addEventListener('click', ()=>{
  const rows = getSelectedRows();
  if (!rows.length){ alert('æ²’æœ‰å‹¾é¸ä»»ä½•åˆ—'); return; }
  const text = rows.map(r=>{
    const lvl = String(r.level||"").replace(/^Lv\.?/i,'');  // Lv.75 -> 75
    const t = fmtTime(new Date(r.targetISO));               // åªè¦ HH:MM:SS
    return `${r.ep}-${lvl}-${r.channel}-${t}`;
  }).join('\n');                                            // æ¯ç­†ä¸€è¡Œ
  navigator.clipboard.writeText(text).then(()=>toast());
});

document.getElementById('copyAllBtn').addEventListener('click', ()=>{
  const rows = getAllRows();
  if (!rows.length){ alert('ç›®å‰æ¸…å–®ç‚ºç©º'); return; }
  const text = rows.map(r=>{
    const lvl = String(r.level||"").replace(/^Lv\.?/i,'');
    const t = fmtTime(new Date(r.targetISO));
    return `${r.ep}-${lvl}-${r.channel}-${t}`;
  }).join('\n');
  navigator.clipboard.writeText(text).then(()=>toast('å·²è¤‡è£½å…¨éƒ¨ï¼'));
});

/** åˆªé™¤ */
document.getElementById('delCheckedBtn').addEventListener('click', ()=>{
  const keys = Object.entries(state.entries).filter(([,v])=>v.checked).map(([k])=>k);
  if (!keys.length){ alert('æ²’æœ‰å‹¾é¸ä»»ä½•åˆ—'); return; }
  keys.forEach(k=>delete state.entries[k]);
  save(); render();
});
document.getElementById('delAllBtn').addEventListener('click', ()=>{
  if (!confirm('ç¢ºå®šè¦æ¸…é™¤å…¨éƒ¨å—ï¼Ÿ')) return;
  state.entries = {};
  save(); render();
});

/** å‹¾é¸é»æ“Šï¼ˆäº‹ä»¶ä»£ç†ï¼‰ */
tbody.addEventListener('change', (e)=>{
  if (!e.target.classList.contains('chk')) return;
  const tr = e.target.closest('tr'); if (!tr) return;
  const key = tr.dataset.key;
  if (state.entries[key]){
    state.entries[key].checked = e.target.checked;
    save();
  }
});

/** ===== æç¤ºéŸ³ & æå‰æé†’ ===== */
soundToggle.addEventListener('change', ()=>{
  state.soundEnabled = soundToggle.checked; save();
});
alertBefore.addEventListener('change', ()=>{
  state.alertBeforeMin = parseInt(alertBefore.value,10)||0; save();
});

/** ===== è¨ˆæ™‚è¼ªè©¢ï¼šæ¯ç§’åˆ·æ–° + ç™¼é€æé†’ ===== */
setInterval(()=>{
  // æé†’
  const now = new Date();
  const beforeMs = (state.alertBeforeMin||0)*60*1000;
  Object.values(state.entries).forEach(r=>{
    const t = new Date(r.targetISO).getTime();
    if (!r.alertedBefore && beforeMs>0 && now.getTime() >= (t - beforeMs) && now.getTime() < t){
      beep(); r.alertedBefore = true; save();
    }
    if (!r.alertedFinal && now.getTime() >= t){
      beep(); r.alertedFinal = true; save();
    }
  });
  // ç•«é¢æ™‚é–“å­—ä¸²åˆ·æ–°
  render();
}, 1000);

/** ===== å¯†ç¢¼é©—è­‰ ===== */
async function fetchPassword(){
  const r = await fetch(PASSWORD_URL, {cache:'no-cache'});
  if (!r.ok) throw new Error('å¯†ç¢¼ API å¤±æ•—');
  return (await r.text()).trim();
}
async function gate(){
  const overlay = document.getElementById('pwOverlay');
  const msg = document.getElementById('pwMsg');
  const input = document.getElementById('pwInput');
  const okBtn = document.getElementById('pwOk');
  const cancelBtn = document.getElementById('pwCancel');

  let correct = null;
  msg.textContent = "æ­£åœ¨å–å¾—å¯†ç¢¼â€¦";
  try{
    correct = await fetchPassword();
    msg.textContent = "";
  }catch(e){
    msg.textContent = "ç„¡æ³•å–å¾—å¯†ç¢¼ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ–ç¨å¾Œå†è©¦ã€‚";
  }

  return new Promise((resolve)=>{
    function tryCheck(){
      if (!correct){ alert('å°šæœªå–å¾—å¯†ç¢¼ï¼Œè«‹ç¨å¾Œé‡æ•´é é¢ã€‚'); return; }
      if ((input.value||"").trim() === correct){
        overlay.classList.add('hidden');
        resolve(true);
      }else{
        msg.textContent = "å¯†ç¢¼éŒ¯èª¤ï¼";
      }
    }
    okBtn.onclick = tryCheck;
    input.onkeypress = e=>{ if(e.key==='Enter') tryCheck(); };
    cancelBtn.onclick = ()=>{ window.close(); resolve(false); };
  });
}

/** ===== å•Ÿå‹• ===== */
(async function init(){
  // è¼‰å…¥å„²å­˜
  load();
  // ç¶å®šä¸‹æ‹‰
  initSelectors();
  epSel.addEventListener('change', refreshMaps);
  mapSel.addEventListener('change', refreshLevel);

  // åˆæ¬¡æ¸²æŸ“
  render();

  // å¯†ç¢¼é–€ç¦
  await gate();
})();
</script>
</body>
</html>
